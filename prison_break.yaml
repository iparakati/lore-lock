title: "Prison Break"

# The story flows from room to room.
scenes:
  - id: "Damp Stone Cell"
    name: "Damp Stone Cell"
    description: "You wake up on a hard slab in a damp stone cell. The air is cold and smells strongly of brine and mold."
    help_text: |
      You are stuck in a cell.
      Scene Specific Commands:
      - 'examine slab'
      - 'push slab'
      - 'open box'
      - 'unlock bars with shiv'

    # Items inside the room are listed here
    contents:
      - id: "stone slab"
        name: "Stone Slab"
        aliases: ["slab"]
        description: "It seems loose. You might be able to move it."
        properties: { fixed: false }
        interactions:
          push:
            - message: "You shift the heavy stone slab. Underneath, you discover a rusty shiv!"
              condition: "items['rusty shiv'].location_id == 'off-stage'"
              actions:
                - { type: "move", target: "rusty shiv", destination: "current_location" }
                - { type: "set_property", target: "stone slab", property: "fixed", value: true }
          attack:
            - message: "It's stone. You'll only hurt your hands."

      - id: "moldy box"
        kind: "container"
        name: "moldy box"
        aliases: ["box"]
        description: "A rotting wooden box."
        properties: { open: false }

    # Exits and Doors
    exits:
      north:
        target: "Corridor"
        door: "iron bars"

  - id: "Corridor"
    name: "The Corridor"
    description: "A dimly lit corridor, silent except for the drip of water. Torches flicker weakly on the walls."
    help_text: |
      You have escaped!
      Scene Specific Commands:
      - 'south' to return
    exits:
      south:
        target: "Damp Stone Cell"
        door: "iron bars"

# Objects that don't start in a room (hidden or off-stage)
off_stage:
  - id: "rusty shiv"
    name: "rusty shiv"
    aliases: ["shiv"]
    description: "A jagged piece of metal, sharp enough to cut but not meant for heavy fighting."

# Door definitions (connecting mechanisms)
doors:
  - id: "iron bars"
    name: "iron bars"
    aliases: ["bars"]
    description: "Thick iron bars blocking the way."
    locked: true
    key: "rusty shiv"
    status_descriptions:
      locked: "They appear to be locked."
      closed: "Iron bars block the way."

# Game configuration
start_room: "Damp Stone Cell"

test_sequence:
  - "help"
  - "examine slab"
  - "push slab"
  - "take shiv"
  - "open box"
  - "put shiv in box"
  - "save"
  - "look"
  - "load"
  - "examine box"
  - "take shiv"
  - "unlock bars with shiv"
  - "open bars"
  - "north"
  - "help"

win_condition:
  type: "location"
  target: "Corridor"
